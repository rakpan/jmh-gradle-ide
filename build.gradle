plugins {
	id 'java'
	id 'idea'
	id 'com.github.johnrengelman.shadow' version '1.2.3'
	id 'me.champeau.gradle.jmh' version '0.3.1'
	id 'net.ltgt.apt' version '0.9'
}

repositories {
	jcenter()
	mavenCentral()
}

sourceCompatibility = targetCompatibility = 1.8

tasks.withType(AbstractCompile)*.options*.encoding = "UTF-8"

jmh.jmhVersion = '1.15'
tasks.jmh.main = 'me.rakpan.StreamProcessingBenchmark'

jmhJar {
	manifest.attributes 'Main-Class': tasks.jmh.main
	append 'META-INF/BenchmarkList'
	append 'META-INF/CompilerHints'
}

dependencies {
	compile "org.openjdk.jmh:jmh-core:${jmh.jmhVersion}"
	apt "org.openjdk.jmh:jmh-generator-annprocess:${jmh.jmhVersion}"
}

